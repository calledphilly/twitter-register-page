<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../dist/main.css">
  <title>Twitter register page</title>
</head>
<body class="bg-bleu h-screen w-screen flex ">
  <div class="m-auto w-[600px] h-[650px]  bg-black rounded-2xl">
    
    <div class="bg-black h-[10%]">
      <h2 class="text-twitter-white text-lg pt-3 pl-[12%]">Étapes 2/5</h2>
    </div>

    <div class="h-[90%] w-[72%] bg-white m-auto">
      <h1 class="text-3xl text-twitter-white bg-black h-[12%] pl-2">Créer votre compte</h1>
      <form action="" class="relative bg-black h-[88%]" >
        
        <p class=" mb-2 text-sm text-twitter-white ">Date de naissance</p>
        <p class=" text-sm text-[#71767A] pb-3">
          Cette information ne sera pas affichée publiquement. Confirmez votre âge, même si ce compte est pour une entreprise, un animal de compagnie ou autre chose.
        </p>

        <input type="date" name="" id="dateInput" class="hidden w-full ">

        <div class=" relative flex justify-between">

          <div class="w-[45%] h-11  relative">
            <label class=" absolute top-1 left-2 text-xs text-[#71767A]" for="monthInput">
              Mois
            </label>
            <select class="w-full h-full pl-2 pt-4 bg-black  text-twitter-white text-sm  appearance-none border border-[#333639] focus:outline-none focus:ring-2 focus:ring-[#1A8BD6] rounded " name="" id="monthInput">
              <option value="00" selected></option>
              <option value="01">Janvier</option>
              <option value="02">Février</option>
              <option value="03">Mars</option>
              <option value="04">Avril</option>
              <option value="05">Mai</option>
              <option value="06">Juin</option>
              <option value="07">Juillet</option>
              <option value="08">Aout</option>
              <option value="09">Septembre</option>
              <option value="10">Octobre</option>
              <option value="11">Novembre</option>
              <option value="12">Décembre</option>
            </select>
          </div>

          <div class="w-[22%] relative">
            <label class=" absolute top-1 left-2 text-xs text-[#71767A]" for="dayInput">
              Jour
            </label>
            <select class="w-full h-full pl-2 pt-4 bg-black  text-twitter-white text-sm appearance-none border border-[#333639] focus:outline-none focus:ring-2 focus:ring-[#1A8BD6] rounded " name="" id="dayInput">
              <option value="00" selected></option>
              <option value="01">1</option>
              <option value="02">2</option>
              <option value="03">3</option>
              <option value="04">4</option>
              <option value="05">5</option>
              <option value="06">6</option>
              <option value="07">7</option>
              <option value="08">8</option>
              <option value="09">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="13">13</option>
              <option value="14">14</option>
              <option value="15">15</option>
              <option value="16">16</option>
              <option value="17">17</option>
              <option value="18">18</option>
              <option value="19">19</option>
              <option value="20">20</option>
              <option value="21">21</option>
              <option value="22">22</option>
              <option value="23">23</option>
              <option value="24">24</option>
              <option value="25">25</option>
              <option value="26">26</option>
              <option value="27">27</option>
              <option value="28">28</option>
              <option value="29">29</option>
              <option value="30">30</option>
              <option value="31">31</option>
            </select>
          </div>

          <div class="w-[25%] relative">
            <label class="absolute top-1 left-2 text-xs text-[#71767A]" for="yearInput">
              Année
            </label>
            <select class="w-full h-full pl-2 pt-4 bg-black  text-twitter-white text-sm appearance-none border border-[#333639] focus:outline-none  focus:ring-2 focus:ring-[#1A8BD6] rounded " name="" id="yearInput">
              <option value="0000" selected></option>
            </select>
          </div>
        </div>

        <a href="etape3.html" class="absolute bottom-5 block text-center w-full  py-3 bg-[#777A7A] rounded-full text-[#080A0E] text-sm font-extrabold  ">
          Suivant
          <!-- <button class="w-full mt-32 py-3 bg-[#777A7A] rounded-full text-[#080A0E] text-sm font-extrabold  " type="submit" value="Suivant" id=""> Suivant </button> -->
        </a>
      </form>
    </div>

  </div>

  <script type="text/javascript">
    const dayInput = document.getElementById('dayInput');
    const monthInput = document.getElementById('monthInput');
    const yearInput = document.getElementById('yearInput');

    const table = [dayInput, monthInput, yearInput];
    
    // change la couleur du label d'un input
    table.forEach(element => {
      // un input peut avoir plusieurs labels, la methode est donc un tab nommée labels
      const label = element.labels[0];
      // console.log(label);
      element.addEventListener('focus', () => {
        label.classList.remove('text-[#71767A]');
        label.classList.add('text-[#1A8BD6]');
        //console.log(label);
      })  
      element.addEventListener('blur', () => {
        label.classList.remove('text-[#1A8BD6]');
        label.classList.add('text-[#71767A]');
        //console.log(label);
      })
    })

    // console.dir(dateInput.value)
    /* dateInput.addEventListener('change', function() {
      const selectedDate = new Date(this.value);
      //console.dir(dateInput.value);
      dayInput.value = selectedDate.getDate();
      monthInput.value = selectedDate.getMonth() + 1; // Les mois sont indexés à partir de 0, donc on ajoute 1
      yearInput.value = selectedDate.getFullYear();
    }) */

    // initialiser currentYear à la date local (AAAA-MM-JJ)
    const currentYear = new Date().getFullYear();
    // initialiser startYear à la valeur currentYear - 100
    const startYear = currentYear - 150; // Année de départ (par exemple, 150 ans en arrière)

    // boucle for qui parcour et ajoute les années de currentYear à startYear avec la variable yearList dans yearInput
    for (let yearList = currentYear; yearList >= startYear; yearList--) {
      // création de la balise <option></option>
      const option = document.createElement('option');
      // ajoute l'attrubit value à option : <option value='yearList'></option>
      option.value = yearList ;
      // ajoute yearList a option : <option value='yearList'>yearList</option>
      option.innerHTML = yearList;
      /* ajoute option comme enfant de yearInput :
      < id='yearInput'>
        <option value='yearList'>yearList</option> 
      </ > */
      yearInput.appendChild(option);

    }

    // vérifie tous les changement du DOM
    document.addEventListener('change', () => {
        
      // allInputsDateFilled est true si dayInput, monthInput et yearInput sont non-vide sinon allInputsDateFilled false
      const allInputsDateFilled = table.every(element => element.value.trim() !== '');
      // si allInputsDateFilled faire dateInput.value = "yearInput.value-monthInput.value-dayInput.value"
      allInputsDateFilled ? dateInput.value = `${yearInput.value}-${monthInput.value}-${dayInput.value}` : null;
      // console.log(dateInput.value);
    })


    const button = document.querySelector('a');

    function checkDateInput() {
      const dateInputFilled = dateInput.value.trim() !== '';
      /* dateInputFilled ? button.classList.remove('bg-[#777A7A]') : null;
      dateInputFilled ? button.classList.add('bg-twitter-white') : null;

      !dateInputFilled ? button.classList.add('bg-[#777A7A]') : null;
      !dateInputFilled ? button.classList.remove('bg-twitter-white') : null; */
      // console.log(dateInput.value);
      button.classList.toggle('bg-twitter-white', dateInputFilled);
      button.classList.toggle('bg-[#777A7A]', !dateInputFilled);

    }

    // au moindre changement du DOM lancer checkDateInput()
    document.addEventListener('change', checkDateInput);

    button.addEventListener('click', event => {
      // buttonIsWhite is true si button est blanc
      const buttonIsWhite = button.classList.contains('bg-twitter-white');
      // si button isn't white alors empecher le fontionnement du lien
      !buttonIsWhite ? event.preventDefault() : null;
    });
    
  </script>
</body>
</html>