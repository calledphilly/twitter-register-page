<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../dist/main.css">
    <title>Twitter register page</title>
  </head>
  <body class="bg-bleu h-screen w-screen flex ">
    <div class="m-auto w-[600px] h-[650px]  bg-black rounded-2xl">
      
      <div class="bg-black h-[10%]">
        <h2 class="text-twitter-white text-lg pt-3 pl-[12%]">Étapes 1/5</h2>
      </div>
      
      <div class=" h-[90%] w-[72%] bg-white m-auto">
        <h1 class="text-3xl text-twitter-white bg-black h-[12%] pl-2">Créer votre compte</h1>
        <form action="" class="relative bg-black h-[88%]" >
          
          <div class="relative">
            <label class="absolute duration-150 top-3 left-3 text-[#71767A]" for="name">
              Nom et prénom
            </label>
            <p class="hidden absolute top-px right-3 text-xs text-[#71767A]" id="nameCounter"></p>
            <input class="mb-8 w-full py-3 indent-3 rounded bg-black text-twitter-white placeholder-twitter-white border border-[#333639] focus:outline-none focus:ring-2 focus:ring-[#1A8BD6]" type="text" id="name" maxlength="50"> 
          </div>

          <div class="relative">
            <label class="absolute duration-150 top-3 left-3 text-[#71767A]" for="email">
              Email
            </label>
            <input class="mb-8 w-full py-3 indent-3 rounded bg-black text-twitter-white placeholder-twitter-white border border-[#333639] focus:outline-none focus:ring-2 focus:ring-[#1A8BD6] " type="email" id="email"> 
          </div>

          <div class="relative">
            <label class="absolute duration-150 top-3 left-3 text-[#71767A]" for="password">
              Mot de passe
            </label>
            <input class="mb-8 w-full py-3 indent-3 rounded bg-black text-twitter-white placeholder-twitter-white border border-[#333639] focus:outline-none focus:ring-2 focus:ring-[#1A8BD6] " type="password" id="password"> 
          </div>

          <div class="relative">
            <label class="absolute duration-150 top-3 left-3 text-[#71767A]" for="confirmPassword">
              Confirmez votre mot de passe
            </label>
            <input class="mb-8 w-full py-3 indent-3 rounded bg-black text-twitter-white placeholder-twitter-white border border-[#333639] focus:outline-none focus:ring-2 focus:ring-[#1A8BD6] " type="password" id="confirmPassword"> 
          </div>
        

          <a href="etape2.html" class="absolute bottom-5 block text-center w-full mt-28  py-3 bg-[#777A7A] rounded-full text-[#080A0E] text-sm font-extrabold">
            Suivant
          </a>
        </form>
    </div>

  </div>
  <script>
    const inputs = document.querySelectorAll('input');
    const name = document.getElementById('name');
    const nameCounter = document.getElementById('nameCounter');
    
    // nameCounter = 'nombre de caractere dans name' / 'maxLength de name'
    nameCounter.textContent = `${name.value.length} / ${name.maxLength}`;
    
    // quand l'input name est focus
    name.addEventListener('focus', () => {
      // enlever hidden au name's counter
      nameCounter.classList.remove('hidden');
    })
    
    // quand l'input name n'est plus focus
    name.addEventListener('blur', () => {
      // ajouter hidden au name's counter
      nameCounter.classList.add('hidden');
    })
    
    
    name.addEventListener('input', () => {
      // nameCounter = 'nombre de caractere dans name' / 'maxLength de name'
      nameCounter.textContent = `${name.value.length} / ${name.maxLength}`;
    })

    inputs.forEach(input => {
      const label= input.labels[0];
      input.addEventListener('focus', () => {
        if (input.value.trim() === '') {
          label.classList.toggle('top-3');
          label.classList.toggle('top-px');
          label.classList.toggle('text-xs');
        }
        label.classList.toggle('text-[#71767A]');
        label.classList.toggle('text-[#1A8BD6]');
      })

      input.addEventListener('blur', () => {
        if (input.value.trim() === '') {
          label.classList.toggle('top-3');
          label.classList.toggle('top-px');
          label.classList.toggle('text-xs');
        }
        label.classList.toggle('text-[#71767A]');
        label.classList.toggle('text-[#1A8BD6]');
      })}
    )

    const button = document.querySelector('a');

    function checkAllInputs() {
      // Array.from(inputs) transforme la Nodeliste en tableau pour pouvoir utliser les methodes des tableaux
      // every() regarde tous les elements d'un tableu et applique input.value.trim() !== '' et retourne true or false 
      const allInputsFilled = Array.from(inputs).every(input => input.value.trim() !== '');
      // twoPasswordEqual is true si les deux inputs password sont égaux
      const twoPasswordEqual = password.value.trim() === confirmPassword.value.trim();

      button.classList.toggle('bg-twitter-white', allInputsFilled && twoPasswordEqual);
      button.classList.toggle('bg-[#777A7A]', !allInputsFilled || !twoPasswordEqual);
    }

    // pour chaque input lors d'un input lancer checkAllInputs()
    inputs.forEach(input => input.addEventListener('input', checkAllInputs));
    // si button isn't white ne pas permettre le comportement normal de button
    button.addEventListener('click', event => {
      const buttonIsWhite = button.classList.contains('bg-twitter-white');
      !buttonIsWhite ? event.preventDefault() : null;
    });

  </script>
</body>
</html>